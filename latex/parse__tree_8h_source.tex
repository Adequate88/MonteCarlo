\doxysection{parse\+\_\+tree.\+h}
\hypertarget{parse__tree_8h_source}{}\label{parse__tree_8h_source}\index{src/functions/parse\_tree.h@{src/functions/parse\_tree.h}}
\mbox{\hyperlink{parse__tree_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Created\ by\ Alessandro\ Salo\ on\ 05.12.2024.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ Created\ by\ Alessandro\ Salo\ on\ 05.12.2024.}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <stack>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#ifndef\ PARSE\_TREE\_HH}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#define\ PARSE\_TREE\_HH}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00026\ \textcolor{comment}{//\ Token\ definition}}
\DoxyCodeLine{00027\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00031\ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921}{TokenType}}\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a34f55eca38e0605a84f169ff61a2a396}{NUMBER}},\ \ \ \ \ }
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921af57e263e90cbbb939b6dc6b8db7992b7}{IDENT}},\ \ \ \ \ \ }
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a883acd43c77567e1c3baced84ccf6ed7}{PLUS}},\ \ \ \ \ \ \ }
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921affc0d9b54a1fe677c4c9e6b050e67c81}{MINUS}},\ \ \ \ \ \ }
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a2cdf52a55876063ec93b7d18bc741f6c}{MUL}},\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a29bbf66f7f8529ec47e394fb5a36c646}{DIV}},\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a17faf4e999b8cee4c36915c1f54ccffe}{POW}},\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a45bf4f3d35a115aaa2df577ba7861286}{LPAREN}},\ \ \ \ \ }
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921afccedc90f87593a3b31536bd658808b1}{RPAREN}},\ \ \ \ \ }
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921ab1a326c06d88bf042f73d70f50197905}{END}}\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00042\ \};}
\DoxyCodeLine{00046\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_token}{Token}}\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921}{TokenType}}\ \mbox{\hyperlink{struct_token_a67919af9f3a80dc0b28a0ab1e6d5bf8a}{type}};\ \ \ \ \ \ \ \ }
\DoxyCodeLine{00048\ \ \ \ \ std::string\ \mbox{\hyperlink{struct_token_a4b7142147b8598f8e24c404928d9263b}{value}};\ \ \ \ \ }
\DoxyCodeLine{00049\ \};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16}{NodeType}}\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a44119bf3bae5d40a8d0766b91c304aac}{NUM}},\ \ \ \ }
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16ad6f4440b8633f973d33c78928bdac2e1}{VAR}},\ \ \ \ }
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a1e49c8ad07b69571bfcafaf18ac9fa5b}{FUNC}},\ \ \ }
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a7457cdd15d09bfc6c4dbb5d2b6f87390}{OP}}\ \ \ \ \ \ }
\DoxyCodeLine{00059\ \};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_a_s_t_node}{ASTNode}}\ \{}
\DoxyCodeLine{00065\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{class_a_s_t_node_aec604d11681563f83bc665e0172b5895}{ASTNode}}(\mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16}{NodeType}}\ t,\ \textcolor{keyword}{const}\ std::string\ \&val)\ :\ \mbox{\hyperlink{class_a_s_t_node_a15fcdbd8403a1169b06d948a827fde55}{nodeType}}(t),\ \mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}(val)\ \{\}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16}{NodeType}}\ \mbox{\hyperlink{class_a_s_t_node_a15fcdbd8403a1169b06d948a827fde55}{nodeType}};\ }
\DoxyCodeLine{00075\ \ \ \ \ std::string\ \mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}};\ }
\DoxyCodeLine{00076\ \ \ \ \ std::vector<std::unique\_ptr<ASTNode>>\ \mbox{\hyperlink{class_a_s_t_node_abf3e9fd194fab8e7b56c38a789cefdac}{children}};\ }
\DoxyCodeLine{00077\ \};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00086\ std::unique\_ptr<ASTNode>\ \mbox{\hyperlink{parse__tree_8h_ae20d55ef8319cae72ed4576faacbd0d6}{makeFunc}}(\textcolor{keyword}{const}\ std::string\ \&name,\ std::unique\_ptr<ASTNode>\ arg)\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ std::make\_unique<ASTNode>(\mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a1e49c8ad07b69571bfcafaf18ac9fa5b}{NodeType::FUNC}},\ name);}
\DoxyCodeLine{00088\ \ \ \ \ node-\/>children.push\_back(std::move(arg));}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00090\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00100\ std::unique\_ptr<ASTNode>\ \mbox{\hyperlink{parse__tree_8h_a414c6c28e70c3cc0f56d7c830038f4a6}{makeOp}}(\textcolor{keyword}{const}\ std::string\ \&op,\ std::unique\_ptr<ASTNode>\ left,\ std::unique\_ptr<ASTNode>\ right)\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ std::make\_unique<ASTNode>(\mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a7457cdd15d09bfc6c4dbb5d2b6f87390}{NodeType::OP}},\ op);}
\DoxyCodeLine{00102\ \ \ \ \ node-\/>children.push\_back(std::move(left));}
\DoxyCodeLine{00103\ \ \ \ \ node-\/>children.push\_back(std::move(right));}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00105\ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00115\ std::vector<Token>\ \mbox{\hyperlink{parse__tree_8h_aacdee2b000d637435e504e16117d9d9e}{tokenize}}(\textcolor{keyword}{const}\ std::string\ \&expr)\ \{}
\DoxyCodeLine{00116\ \ \ \ \ std::vector<Token>\ tokens;}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ pos\ =\ 0;}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keyword}{auto}\ skipWhitespace\ =\ [\&](\ )\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (pos\ <\ expr.size()\ \&\&\ std::isspace(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(expr[pos])))\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \};}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{auto}\ readNumber\ =\ [\&](\ )\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ start\ =\ pos;}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ seenDot\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (pos\ <\ expr.size()\ \&\&\ (std::isdigit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(expr[pos]))\ ||\ expr[pos]\ ==\ \textcolor{charliteral}{'.'}))\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (expr[pos]\ ==\ \textcolor{charliteral}{'.'})\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seenDot)\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Invalid\ number\ with\ multiple\ decimal\ points"{}});}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seenDot\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a34f55eca38e0605a84f169ff61a2a396}{TokenType::NUMBER}},\ expr.substr(start,\ pos\ -\/\ start)\});}
\DoxyCodeLine{00138\ \ \ \ \ \};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keyword}{auto}\ readIdent\ =\ [\&](\ )\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ start\ =\ pos;}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (pos\ <\ expr.size()\ \&\&\ std::isalpha(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(expr[pos])))\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921af57e263e90cbbb939b6dc6b8db7992b7}{TokenType::IDENT}},\ expr.substr(start,\ pos\ -\/\ start)\});}
\DoxyCodeLine{00146\ \ \ \ \ \};}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{while}\ (pos\ <\ expr.size())\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ skipWhitespace();}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ >=\ expr.size())\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ c\ =\ expr[pos];}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (std::isalpha(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(c)))\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Identifier\ (function\ or\ variable)}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ readIdent();}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (std::isdigit(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(c))\ ||\ c\ ==\ \textcolor{charliteral}{'.'})\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Number}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ readNumber();}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Single-\/char\ tokens}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (c)\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a883acd43c77567e1c3baced84ccf6ed7}{TokenType::PLUS}},\ \textcolor{stringliteral}{"{}+"{}}\});}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'-\/'}:}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921affc0d9b54a1fe677c4c9e6b050e67c81}{TokenType::MINUS}},\ \textcolor{stringliteral}{"{}-\/"{}}\});}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'*'}:}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a2cdf52a55876063ec93b7d18bc741f6c}{TokenType::MUL}},\ \textcolor{stringliteral}{"{}*"{}}\});}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'/'}:}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a29bbf66f7f8529ec47e394fb5a36c646}{TokenType::DIV}},\ \textcolor{stringliteral}{"{}/"{}}\});}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\string^'}:}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a17faf4e999b8cee4c36915c1f54ccffe}{TokenType::POW}},\ \textcolor{stringliteral}{"{}\string^"{}}\});}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'('}:}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a45bf4f3d35a115aaa2df577ba7861286}{TokenType::LPAREN}},\ \textcolor{stringliteral}{"{}("{}}\});}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{')'}:}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921afccedc90f87593a3b31536bd658808b1}{TokenType::RPAREN}},\ \textcolor{stringliteral}{"{})"{}}\});}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pos++;}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(std::string(\textcolor{stringliteral}{"{}Unexpected\ character:\ "{}})\ +\ c);}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00195\ \ \ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ tokens.push\_back(\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921ab1a326c06d88bf042f73d70f50197905}{TokenType::END}},\ \textcolor{stringliteral}{"{}"{}}\});}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordflow}{return}\ tokens;}
\DoxyCodeLine{00199\ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00202\ \textcolor{comment}{//\ Parser\ class}}
\DoxyCodeLine{00203\ \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00210\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InputType,\ \textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00211\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_parser}{Parser}}\ \{}
\DoxyCodeLine{00212\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00218\ \ \ \ \ \mbox{\hyperlink{class_parser_a1a60370aecc2259b45f0694bac10b249}{Parser}}(\textcolor{keyword}{const}\ std::string\ \&expression)}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ :\ expression(expression),\ tokens(\mbox{\hyperlink{parse__tree_8h_aacdee2b000d637435e504e16117d9d9e}{tokenize}}(expression)),\ pos(0)}
\DoxyCodeLine{00220\ \ \ \ \ \{\}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00228\ \ \ \ \ std::unique\_ptr<ASTNode>\ \mbox{\hyperlink{class_parser_a580a2a477d66684c7f061bd710409dda}{parse}}()\ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ parseExpression();}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current().type\ !=\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921ab1a326c06d88bf042f73d70f50197905}{TokenType::END}})\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Extra\ tokens\ after\ valid\ expression"{}});}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00234\ \ \ \ \ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_parser_af8cdd573c16595c221ec95358f3e5623}{generateFunction}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_a_s_t_node}{ASTNode}}*\ node)\ \{}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \&child\ :\ node-\/>\mbox{\hyperlink{class_a_s_t_node_abf3e9fd194fab8e7b56c38a789cefdac}{children}})\ \{}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parser_af8cdd573c16595c221ec95358f3e5623}{generateFunction}}(child.get());}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (node-\/>\mbox{\hyperlink{class_a_s_t_node_abf3e9fd194fab8e7b56c38a789cefdac}{children}}.empty()\ \&\&\ (node-\/>\mbox{\hyperlink{class_a_s_t_node_a15fcdbd8403a1169b06d948a827fde55}{nodeType}}\ ==\ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a44119bf3bae5d40a8d0766b91c304aac}{NodeType::NUM}}\ ||\ node-\/>\mbox{\hyperlink{class_a_s_t_node_a15fcdbd8403a1169b06d948a827fde55}{nodeType}}\ ==\ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16ad6f4440b8633f973d33c78928bdac2e1}{NodeType::VAR}}))\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ createNumerics(node);}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (node-\/>\mbox{\hyperlink{class_a_s_t_node_a15fcdbd8403a1169b06d948a827fde55}{nodeType}}\ ==\ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a7457cdd15d09bfc6c4dbb5d2b6f87390}{NodeType::OP}})\ \{}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ performOperation(node);}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (node-\/>\mbox{\hyperlink{class_a_s_t_node_a15fcdbd8403a1169b06d948a827fde55}{nodeType}}\ ==\ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a1e49c8ad07b69571bfcafaf18ac9fa5b}{NodeType::FUNC}})\ \{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ composeFunc(node);}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00256\ \ \ \ \ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00264\ \ \ \ \ \mbox{\hyperlink{class_abstract_function}{AbstractFunction<InputType,\ OutputType>}}*\ \mbox{\hyperlink{class_parser_ab713fab97b92161da1d30985538ecd26}{getFinalFunction}}()\ \{}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (functionStack.empty())\ \{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Function\ Stack\ is\ Empty.\ Run\ generateFunction()\ first."{}});}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ functionStack.top();}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \}}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00274\ \ \ \ \ std::string\ expression;\ }
\DoxyCodeLine{00275\ \ \ \ \ std::vector<Token>\ tokens;\ }
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ pos;\ }
\DoxyCodeLine{00277\ \ \ \ \ std::stack<AbstractFunction<InputType,\ OutputType>*>\ functionStack;\ }
\DoxyCodeLine{00278\ \ \ \ \ std::vector<std::unique\_ptr<AbstractFunction<InputType,\ OutputType>>>\ functionMemory;\ }
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordtype}{void}\ composeFunc(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_a_s_t_node}{ASTNode}}*\ token)\ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ std::unique\_ptr<AbstractFunction<InputType,\ OutputType>>\ func;}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}\ ==\ \textcolor{stringliteral}{"{}cos"{}})\ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ func\ =\ std::make\_unique<FunctionWrapper<InputType,\ OutputType>>(}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](InputType\ x)\ \{\ \textcolor{keywordflow}{return}\ std::cos(x);\ \}}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}\ ==\ \textcolor{stringliteral}{"{}sin"{}})\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ func\ =\ std::make\_unique<FunctionWrapper<InputType,\ OutputType>>(}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](InputType\ x)\ \{\ \textcolor{keywordflow}{return}\ std::sin(x);\ \}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}\ ==\ \textcolor{stringliteral}{"{}tan"{}})\ \{}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ func\ =\ std::make\_unique<FunctionWrapper<InputType,\ OutputType>>(}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](InputType\ x)\ \{\ \textcolor{keywordflow}{return}\ std::tan(x);\ \}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}\ ==\ \textcolor{stringliteral}{"{}exp"{}})\ \{}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ func\ =\ std::make\_unique<FunctionWrapper<InputType,\ OutputType>>(}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](InputType\ x)\ \{\ \textcolor{keywordflow}{return}\ std::exp(x);\ \}}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}\ ==\ \textcolor{stringliteral}{"{}log"{}})\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ func\ =\ std::make\_unique<FunctionWrapper<InputType,\ OutputType>>(}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](InputType\ x)\ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <=\ 0)\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::domain\_error(\textcolor{stringliteral}{"{}Logarithm\ undefined\ for\ non-\/positive\ values"{}});}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::log(x);}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::invalid\_argument(\textcolor{stringliteral}{"{}Unknown\ function:\ "{}}\ +\ token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}});}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ensure\ there\ is\ an\ argument\ on\ the\ stack\ for\ the\ composed\ function}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (functionStack.empty())\ \{}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Not\ enough\ arguments\ on\ the\ stack\ for\ function:\ "{}}\ +\ token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}});}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ the\ top\ argument\ off\ the\ stack\ before\ popping}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ argPtr\ =\ functionStack.top();}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ functionStack.pop();}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ functionMemory.push\_back(std::move(func));}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ funcPtr\ =\ functionMemory.back().get();}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ create\ the\ composed\ function\ using\ both\ func\ and\ arg}}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ composed\ =\ std::make\_unique<ComposedFunction<InputType,\ OutputType>>(*funcPtr,\ *argPtr);}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ functionMemory.push\_back(std::move(composed));}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ functionStack.push(functionMemory.back().get());}
\DoxyCodeLine{00338\ \ \ \ \ \}}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keywordtype}{void}\ performOperation(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_a_s_t_node}{ASTNode}}*\ token)\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ std::unique\_ptr<AbstractFunction<InputType,\ OutputType>>\ newFunc;}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Extract\ the\ right\ operand}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ rightPtr\ =\ functionStack.top();}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ functionStack.pop();}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ leftPtr\ =\ functionStack.top();}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ functionStack.pop();}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}\ ==\ \textcolor{stringliteral}{"{}+"{}})\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ newFunc\ =\ std::make\_unique<AddFunction<InputType,\ OutputType>>(*leftPtr,\ *rightPtr);}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}\ ==\ \textcolor{stringliteral}{"{}*"{}})\ \{}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ newFunc\ =\ std::make\_unique<MultiplyFunction<InputType,\ OutputType>>(*leftPtr,\ *rightPtr);}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::invalid\_argument(\textcolor{stringliteral}{"{}Unsupported\ operator:\ "{}}\ +\ token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}});}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ functionMemory.push\_back(std::move(newFunc));}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ functionStack.push(functionMemory.back().get());;}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \}}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00383\ \ \ \ \ \textcolor{keywordtype}{void}\ createNumerics(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_a_s_t_node}{ASTNode}}*\ token)\ \{}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ std::unique\_ptr<AbstractFunction<InputType,\ OutputType>>\ func;}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(token-\/>\mbox{\hyperlink{class_a_s_t_node_a15fcdbd8403a1169b06d948a827fde55}{nodeType}}\ ==\ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a44119bf3bae5d40a8d0766b91c304aac}{NodeType::NUM}})\ \{}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ InputType\ value;}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_floating\_point<InputType>::value)\ \{}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ value\ =\ \textcolor{keyword}{static\_cast<}InputType\textcolor{keyword}{>}(std::stod(token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}));\ \textcolor{comment}{//\ Convert\ to\ floating-\/point}}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_integral<InputType>::value)\ \{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ value\ =\ \textcolor{keyword}{static\_cast<}InputType\textcolor{keyword}{>}(std::stoi(token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}}));\ \textcolor{comment}{//\ Convert\ to\ integer}}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::invalid\_argument(\textcolor{stringliteral}{"{}Unsupported\ InputType\ for\ conversion"{}});}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ func\ =\ std::make\_unique<ConstantFunction<InputType>>(value);}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(token-\/>\mbox{\hyperlink{class_a_s_t_node_a15fcdbd8403a1169b06d948a827fde55}{nodeType}}\ ==\ \mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16ad6f4440b8633f973d33c78928bdac2e1}{NodeType::VAR}})\ \{}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ func\ =\ std::make\_unique<IdentityFunction<InputType>>();}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::invalid\_argument(\textcolor{stringliteral}{"{}Invalid\ Token\ Found:\ "{}}\ +\ token-\/>\mbox{\hyperlink{class_a_s_t_node_ab98e6f0f9d6a3ce0190c8932a5a2e55d}{value}});}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ functionMemory.push\_back(std::move(func));}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Push\ a\ raw\ pointer\ onto\ the\ stack}}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ functionStack.push(functionMemory.back().get());}
\DoxyCodeLine{00407\ \ \ \ \ \}}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_token}{Token}}\&\ current()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ <\ tokens.size())\ \textcolor{keywordflow}{return}\ tokens[pos];}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_token}{Token}}\ endToken\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921ab1a326c06d88bf042f73d70f50197905}{TokenType::END}},\ \textcolor{stringliteral}{"{}"{}}\};}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ endToken;}
\DoxyCodeLine{00421\ \ \ \ \ \}}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_token}{Token}}\&\ peek()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos+1\ <\ tokens.size())\ \textcolor{keywordflow}{return}\ tokens[pos+1];}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_token}{Token}}\ endToken\{\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921ab1a326c06d88bf042f73d70f50197905}{TokenType::END}},\ \textcolor{stringliteral}{"{}"{}}\};}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ endToken;}
\DoxyCodeLine{00427\ \ \ \ \ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordtype}{void}\ advance()\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ <\ tokens.size())\ pos++;}
\DoxyCodeLine{00431\ \ \ \ \ \}}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keywordtype}{void}\ expect(\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921}{TokenType}}\ t)\ \{}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current().type\ !=\ t)\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Unexpected\ token\ type"{}});}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00437\ \ \ \ \ \}}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00448\ \ \ \ \ std::unique\_ptr<ASTNode>\ parseExpression()\ \{}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ parseTerm();}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (current().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a883acd43c77567e1c3baced84ccf6ed7}{TokenType::PLUS}}\ ||\ current().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921affc0d9b54a1fe677c4c9e6b050e67c81}{TokenType::MINUS}})\ \{}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ op\ =\ current().\mbox{\hyperlink{struct_token_a4b7142147b8598f8e24c404928d9263b}{value}};}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ advance();}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ right\ =\ parseTerm();}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ node\ =\ \mbox{\hyperlink{parse__tree_8h_a414c6c28e70c3cc0f56d7c830038f4a6}{makeOp}}(op,\ std::move(node),\ std::move(right));}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00457\ \ \ \ \ \}}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \ \ \textcolor{comment}{//\ Term\ :=\ Factor\ \{\ ('*'\ |\ '/')\ Factor\ \}}}
\DoxyCodeLine{00460\ \ \ \ \ std::unique\_ptr<ASTNode>\ parseTerm()\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ parseFactor();}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (current().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a2cdf52a55876063ec93b7d18bc741f6c}{TokenType::MUL}}\ ||\ current().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a29bbf66f7f8529ec47e394fb5a36c646}{TokenType::DIV}})\ \{}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ op\ =\ current().\mbox{\hyperlink{struct_token_a4b7142147b8598f8e24c404928d9263b}{value}};}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ advance();}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ right\ =\ parseFactor();}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ node\ =\ \mbox{\hyperlink{parse__tree_8h_a414c6c28e70c3cc0f56d7c830038f4a6}{makeOp}}(op,\ std::move(node),\ std::move(right));}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00469\ \ \ \ \ \}}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \ \ \textcolor{comment}{//\ Factor\ :=\ Power\ \{\ '\string^'\ Power\ \}}}
\DoxyCodeLine{00472\ \ \ \ \ std::unique\_ptr<ASTNode>\ parseFactor()\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ parsePower();}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (current().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a17faf4e999b8cee4c36915c1f54ccffe}{TokenType::POW}})\ \{}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ advance();\ \textcolor{comment}{//\ consume\ '\string^'}}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ right\ =\ parsePower();}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ node\ =\ \mbox{\hyperlink{parse__tree_8h_a414c6c28e70c3cc0f56d7c830038f4a6}{makeOp}}(\textcolor{stringliteral}{"{}\string^"{}},\ std::move(node),\ std::move(right));}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00480\ \ \ \ \ \}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00482\ \ \ \ \ \textcolor{comment}{//\ Power\ :=\ FunctionCall\ |\ Variable\ |\ Number\ |\ '('\ Expression\ ')'}}
\DoxyCodeLine{00483\ \ \ \ \ std::unique\_ptr<ASTNode>\ parsePower()\ \{}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921af57e263e90cbbb939b6dc6b8db7992b7}{TokenType::IDENT}})\ \{}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ name\ =\ current().\mbox{\hyperlink{struct_token_a4b7142147b8598f8e24c404928d9263b}{value}};}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ it's\ a\ function\ call}}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (peek().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a45bf4f3d35a115aaa2df577ba7861286}{TokenType::LPAREN}})\ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ advance();\ \textcolor{comment}{//\ consume\ IDENT}}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ advance();\ \textcolor{comment}{//\ consume\ '('}}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ arg\ =\ parseExpression();}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ expect(\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921afccedc90f87593a3b31536bd658808b1}{TokenType::RPAREN}});}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ advance();\ \textcolor{comment}{//\ consume\ ')'}}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{parse__tree_8h_ae20d55ef8319cae72ed4576faacbd0d6}{makeFunc}}(name,\ std::move(arg));}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Just\ a\ variable}}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ advance();}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_unique<ASTNode>(\mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16ad6f4440b8633f973d33c78928bdac2e1}{NodeType::VAR}},\ name);}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (current().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a34f55eca38e0605a84f169ff61a2a396}{TokenType::NUMBER}})\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ val\ =\ current().\mbox{\hyperlink{struct_token_a4b7142147b8598f8e24c404928d9263b}{value}};}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ advance();}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_unique<ASTNode>(\mbox{\hyperlink{parse__tree_8h_acac9cbaeea226ed297804c012dc12b16a44119bf3bae5d40a8d0766b91c304aac}{NodeType::NUM}},\ val);}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (current().type\ ==\ \mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921a45bf4f3d35a115aaa2df577ba7861286}{TokenType::LPAREN}})\ \{}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ advance();\ \textcolor{comment}{//\ consume\ '('}}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ parseExpression();}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ expect(\mbox{\hyperlink{parse__tree_8h_aa520fbf142ba1e7e659590c07da31921afccedc90f87593a3b31536bd658808b1}{TokenType::RPAREN}});}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ advance();\ \textcolor{comment}{//\ consume\ ')'}}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ node;}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Unexpected\ token\ while\ parsing\ power"{}});}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00512\ \ \ \ \ \}}
\DoxyCodeLine{00513\ \};}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//PARSE\_TREE\_HH}}

\end{DoxyCode}
